p5.prototype.AsciiArt=function(_fontName,_fontSize,_textStyle){this.__fontName='monospace';this.__fontSize=24;this.__textStyle=NORMAL;this.__graphics=createGraphics(10,10);this.__range={min:32,max:126};this.__weightTable=[];this.__automaticPixelsDataTransferFlag=!0;this.invertBrightnessFlag=!1;if(arguments.length>0)this.__fontName=_fontName;if(arguments.length>1){if(!isNaN(_fontSize)){_fontSize=Math.floor(Math.abs(_fontSize));if(_fontSize>5)this.__fontSize=_fontSize}}
if(arguments.length>2)this.__textStyle=_textStyle;this.createWeightTable()}
p5.prototype.AsciiArt.prototype.resizeGraphicsWorkaround=function(_g,_w,_h){if(_g===null||_g===undefined){_g=createGraphics(_w,_h);_g.pixelDensity(1)}
else{_g.width=_w;_g.height=_h;_g.elt.width=_w;_g.elt.height=_h;_g.elt.style.width=_w+'px';_g.elt.style.height=_h+'px';_g.pixelDensity(1);_g.loadPixels();_g.elt.setAttribute('style','display: none')}
_g.updatePixels();_g.background(0);_g.loadPixels();if(_w*_h!==_g.pixels.length/4){console.log('[AsciiArt, resizeGraphicsWorkaround] _w * _h !== _g.pixels.length / 4:'+'\n_w = '+_w+' _h = '+_h+'\n_g.width = '+_g.width+' _g.height = '+_g.height+'\n_w * _h = '+(_w*_h)+'\n_g.pixels.length / 4 = '+(_g.pixels.length/4))}}
p5.prototype.AsciiArt.prototype.createArray2d=function(_w,_h){var temp_arr=[];for(var temp_x=0;temp_x<_w;temp_x++){var temp_column=[];for(var temp_y=0;temp_y<_h;temp_y++)temp_column[temp_y]=0;temp_arr[temp_x]=temp_column}
return temp_arr}
p5.prototype.AsciiArt.prototype.typeArray2d=function(_arr2d,_dst,_x,_y,_w,_h){if(_arr2d===null){console.log('[AsciiArt, typeArray2d] _arr2d === null');return}
if(_arr2d===undefined){console.log('[AsciiArt, typeArray2d] _arr2d === undefined');return}
switch(arguments.length){case 2:_x=0;_y=0;_w=width;_h=height;break;case 4:_w=width;_h=height;break;case 6:break;default:console.log('[AsciiArt, typeArray2d] bad number of arguments: '+arguments.length);return}
if(_dst.canvas===null){console.log('[AsciiArt, typeArray2d] _dst.canvas === null');return}
if(_dst.canvas===undefined){console.log('[AsciiArt, typeArray2d] _dst.canvas === undefined');return}
var temp_ctx2d=_dst.canvas.getContext('2d');if(temp_ctx2d===null){console.log('[AsciiArt, typeArray2d] _dst canvas 2d context is null');return}
if(temp_ctx2d===undefined){console.log('[AsciiArt, typeArray2d] _dst canvas 2d context is undefined');return}
var dist_hor=_w/_arr2d.length;var dist_ver=_h/_arr2d[0].length;var offset_x=_x+dist_hor*0.5;var offset_y=_y+dist_ver*0.5;for(var temp_y=0;temp_y<_arr2d[0].length;temp_y++)
for(var temp_x=0;temp_x<_arr2d.length;temp_x++)
temp_ctx2d.fillText(_arr2d[temp_x][temp_y],offset_x+temp_x*dist_hor,offset_y+temp_y*dist_ver);}
p5.prototype.AsciiArt.prototype.convert2dArrayToString=function(_arr2d){if(arguments.length!==1){console.log('[AsciiArt, convert2dArrayToString] bad number of arguments: '+arguments.length);return''}
if(_arr2d===null){console.log('[AsciiArt, draw] _arr2d === null');return''}
if(_arr2d===undefined){console.log('[AsciiArt, draw] _arr2d === undefined');return''}
var temp_result='';for(var temp_y=0;temp_y<_arr2d[0].length;temp_y++){for(var temp_x=0;temp_x<_arr2d.length;temp_x++){temp_result+=_arr2d[temp_x][temp_y]}
if(temp_y<_arr2d[0].length-1)temp_result+='\n'}
return temp_result}
p5.prototype.AsciiArt.prototype.printWeightTable=function(){for(var i=0;i<this.__weightTable.length;i++)
console.log('['+i+'] '+char(this.__weightTable[i].code)+' '+this.__weightTable[i].weight);}
p5.prototype.AsciiArt.prototype.createWeightTable=function(){var temp_weightTable=[];var temp_weight,temp_index;var temp_w=this.__fontSize*5;var temp_h=this.__fontSize*3;this.resizeGraphicsWorkaround(this.__graphics,temp_w,temp_h);this.__graphics.textFont(this.__fontName);this.__graphics.textSize(this.__fontSize);this.__graphics.textStyle(this.__textStyle);this.__graphics.textAlign(CENTER,CENTER);this.__graphics.noStroke();this.__graphics.fill(255);for(var i=this.__range.min;i<=this.__range.max;i++){this.__graphics.background(0);this.__graphics.text(char(i),temp_w*0.5,temp_h*0.5);this.__graphics.loadPixels();temp_weight=0;for(var j=0;j<this.__graphics.pixels.length;j+=4)
temp_weight+=this.__graphics.pixels[j];temp_weightTable[i-this.__range.min]={code:i,weight:temp_weight}}
this.__weightTable.splice(0,this.__weightTable.length);do{temp_index=-1;temp_weight=-1;for(var i=0;i<temp_weightTable.length;i++){if(temp_weightTable[i].weight>=0){if(temp_weight<0||temp_weightTable[i].weight<temp_weight){temp_weight=temp_weightTable[i].weight;temp_index=i}}}
if(temp_index>=0){this.__weightTable[this.__weightTable.length]={code:temp_weightTable[temp_index].code,weight:temp_weightTable[temp_index].weight};temp_weightTable[temp_index].weight=-1}}while(temp_index>=0)}
p5.prototype.AsciiArt.prototype.convert=function(_image,_w,_h){if(arguments.length!==1&&arguments.length!==3){console.log('[AsciiArt, convert] bad number of arguments: '+arguments.length);return null}
if(_image===null){console.log('[AsciiArt, convert] _image === null');return null}
if(_image===undefined){console.log('[AsciiArt, convert] _image === undefined');return null}
if(arguments.length===3){if(isNaN(_w)){console.log('[AsciiArt, convert] _w is not a number (NaN)');return null}
if(isNaN(_h)){console.log('[AsciiArt, convert] _h is not a number (NaN)');return null}
_w=Math.floor(Math.abs(_w));_h=Math.floor(Math.abs(_h));if(_w<1)_w=1;if(_h<1)_h=1;if(this.__graphics.width!==_w||this.__graphics.height!==_h){this.resizeGraphicsWorkaround(this.__graphics,_w,_h)}}
else{if(this.__graphics.width!==_image.width||this.__graphics.height!==_image.height){this.resizeGraphicsWorkaround(this.__graphics,_image.width,_image.height)}}
this.__graphics.background(0);this.__graphics.image(_image,0,0,this.__graphics.width,this.__graphics.height);return this.__convert()}
p5.prototype.AsciiArt.prototype.__convert=function(){if(this.__automaticPixelsDataTransferFlag)this.__graphics.loadPixels();var temp_result=this.createArray2d(this.__graphics.width,this.__graphics.height);var temp_maxWeight=3*255;var temp_range=this.__weightTable.length-1;var temp_weight,temp_anchor;for(var temp_y=0;temp_y<this.__graphics.height;temp_y++){for(var temp_x=0;temp_x<this.__graphics.width;temp_x++){temp_anchor=(temp_y*this.__graphics.width+temp_x)*4;temp_weight=(this.__graphics.pixels[temp_anchor]+this.__graphics.pixels[temp_anchor+1]+this.__graphics.pixels[temp_anchor+2])/temp_maxWeight;temp_weight=Math.floor(temp_weight*temp_range);if(this.invertBrightnessFlag)temp_weight=temp_range-temp_weight;temp_result[temp_x][temp_y]=char(this.__weightTable[temp_weight].code)}}
if(this.__automaticPixelsDataTransferFlag)this.__graphics.updatePixels();return temp_result}